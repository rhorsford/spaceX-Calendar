!function(){var e,t,n=new Date,a=n.getMonth(),l=n.getFullYear(),c=document.getElementById("year"),o=document.getElementById("month"),d=document.querySelector("#calendar > thead > tr"),r=document.querySelector("#month"),u=document.querySelector("#year"),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m=["2010","2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021"],p=document.getElementById("monthAndYear"),g=document.getElementById("next"),h=document.getElementById("previous"),v=document.getElementById("month"),E=document.getElementById("year"),f=[],y=[];function T(){l=11===a?l+1:l,L(a=(a+1)%12,l)}function x(){l=0===a?l-1:l,L(a=0===a?11:a-1,l)}function I(){l=parseInt(c.value),L(a=parseInt(o.value),l)}function L(e,t){let a=new Date(t,e).getDay();var l=document.getElementById("calendar-body");results=(console.log(y,"array"),y.map(e=>({date:e.launch_date_local,text:e.mission_name}))),l.innerHTML="",p.innerHTML=s[e]+" "+t,c.value=t,o.value=e;let d=1;for(let c=0;c<6;c++){let o=document.createElement("tr");for(let l=0;l<7;l++)if(0===c&&l<a)cell=document.createElement("td"),cellText=document.createTextNode(""),cell.appendChild(cellText),o.appendChild(cell);else{if(d>32-new Date(t,e,32).getDate())break;{cell=document.createElement("td"),cellText=document.createTextNode(d),d===n.getDate()&&t===n.getFullYear()&&e===n.getMonth()&&cell.classList.add("bg-info"),console.log(results);var r=(e+1).toString();console.log(r);const a=results.filter(e=>e.date.includes("0"+r));console.log(a);for(var u=0;u<a.length;u++){var i=a[u].date.split(/-|T/g),m=a[u].text;console.log(i[2]),console.log(m),console.log(i);var g=parseInt(i[2]),h=parseInt(i[1]),v=parseInt(i[0]),E=m+" ("+i[3]+")";if(g===d&&v===t&&h===e+1){cell.classList.add("bg-space");var f=document.createElement("span");cell.appendChild(f),f.innerText=E}}cell.appendChild(cellText),o.appendChild(cell),d++}}l.appendChild(o)}}(e=new XMLHttpRequest).onreadystatechange=function(){4==e.readyState&&200==e.status&&(y=JSON.parse(e.responseText),console.log(y,"object"),f.concat(y),L(a,l))},e.open("GET","https://api.spacexdata.com/v3/launches/upcoming?launch_year=2020&filter=launch_date_local,mission_name",!0),e.send(),i.forEach((function(e){var t=document.createElement("th");t.innerText=e,d.append(t)})),t=0,s.forEach((function(e){var n=document.createElement("option");n.value=t++,n.innerText=e,r.append(n)})),m.forEach((function(e){var t=document.createElement("option");t.value=e,t.innerText=e,u.append(t)})),g.addEventListener("click",T),h.addEventListener("click",x),v.addEventListener("change",I),E.addEventListener("change",I)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsieG1saHR0cCIsImluZGV4IiwidG9kYXkiLCJEYXRlIiwiY3VycmVudE1vbnRoIiwiZ2V0TW9udGgiLCJjdXJyZW50WWVhciIsImdldEZ1bGxZZWFyIiwic2VsZWN0WWVhciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzZWxlY3RNb250aCIsImNhbGVuZGFyRGF5cyIsInF1ZXJ5U2VsZWN0b3IiLCJjYWxlbmRhck1vbnRocyIsImNhbGVuZGFyWWVhcnMiLCJtb250aHMiLCJkYXlzIiwieWVhcnMiLCJtb250aEFuZFllYXIiLCJuZXh0QnRuIiwicHJldkJ0biIsIm1vbnRoRHJvcGRvd24iLCJ5ZWFyRHJvcGRvd24iLCJmZXRjaFJlc3VsdHMiLCJvYmoiLCJuZXh0Iiwic2hvd0NhbGVuZGFyIiwicHJldmlvdXMiLCJqdW1wIiwicGFyc2VJbnQiLCJ2YWx1ZSIsIm1vbnRoIiwieWVhciIsImZpcnN0RGF5IiwiZ2V0RGF5IiwidGJsIiwicmVzdWx0cyIsImNvbnNvbGUiLCJsb2ciLCJtYXAiLCJpdGVtIiwiZGF0ZSIsImxhdW5jaF9kYXRlX2xvY2FsIiwidGV4dCIsIm1pc3Npb25fbmFtZSIsImlubmVySFRNTCIsImkiLCJyb3ciLCJjcmVhdGVFbGVtZW50IiwiaiIsImNlbGwiLCJjZWxsVGV4dCIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJnZXREYXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwibW9udGhNYXRjaCIsInRvU3RyaW5nIiwicmVzdWx0IiwiZmlsdGVyIiwiaCIsImluY2x1ZGVzIiwiayIsImxlbmd0aCIsInBhcnQiLCJzcGxpdCIsIm1pc3Npb25OYW1lIiwiZGF0ZUludCIsIm1vbnRoSW50IiwieWVhckludCIsIm1pc3Npb25EZXRhaWxzIiwic3BhbiIsImlubmVyVGV4dCIsIlhNTEh0dHBSZXF1ZXN0Iiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImNvbmNhdCIsIm9wZW4iLCJzZW5kIiwiZm9yRWFjaCIsImRheSIsImFwcGVuZCIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJDQUFBLFdBRUksSUF1QlFBLEVBb0NBQyxFQTFESkMsRUFBUSxJQUFJQyxLQUNaQyxFQUFlRixFQUFNRyxXQUNyQkMsRUFBY0osRUFBTUssY0FDcEJDLEVBQWFDLFNBQVNDLGVBQWUsUUFDckNDLEVBQWNGLFNBQVNDLGVBQWUsU0FDdENFLEVBQWVILFNBQVNJLGNBQWMsMEJBQ3RDQyxFQUFpQkwsU0FBU0ksY0FBYyxVQUN4Q0UsRUFBZ0JOLFNBQVNJLGNBQWMsU0FDdkNHLEVBQVMsQ0FBQyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sT0FDdkZDLEVBQU8sQ0FBQyxNQUFPLE1BQU8sTUFBTyxNQUFPLE1BQU8sTUFBTyxPQUNsREMsRUFBUSxDQUFDLE9BQVEsT0FBUSxPQUFRLE9BQVEsT0FBUSxPQUFRLE9BQVEsT0FBUSxPQUFRLE9BQVEsT0FBUSxRQUNqR0MsRUFBZVYsU0FBU0MsZUFBZSxnQkFDdkNVLEVBQVVYLFNBQVNDLGVBQWUsUUFDbENXLEVBQVVaLFNBQVNDLGVBQWUsWUFDbENZLEVBQWdCYixTQUFTQyxlQUFlLFNBQ3hDYSxFQUFlZCxTQUFTQyxlQUFlLFFBRXZDYyxFQUFlLEdBQ2ZDLEVBQU0sR0EwRFYsU0FBU0MsSUFDTHBCLEVBQWdDLEtBQWpCRixFQUF1QkUsRUFBYyxFQUFJQSxFQUV4RHFCLEVBREF2QixHQUFnQkEsRUFBZSxHQUFLLEdBQ1RFLEdBRy9CLFNBQVNzQixJQUNMdEIsRUFBZ0MsSUFBakJGLEVBQXNCRSxFQUFjLEVBQUlBLEVBRXZEcUIsRUFEQXZCLEVBQWlDLElBQWpCQSxFQUFzQixHQUFLQSxFQUFlLEVBQy9CRSxHQUcvQixTQUFTdUIsSUFDTHZCLEVBQWN3QixTQUFTdEIsRUFBV3VCLE9BRWxDSixFQURBdkIsRUFBZTBCLFNBQVNu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LFNBQVEsU0FBVXJELEdBQ3JCLElBQUlTLEVBQU9oQyxTQUFTd0MsY0FBYyxVQUNsQ1IsRUFBS1YsTUFBUTlCLElBQ2J3QyxFQUFLaUMsVUFBWTFDLEVBQ2pCbEIsRUFBZXlFLE9BQU85QyxNQUsxQnZCLEVBQU1tRSxTQUFRLFNBQVVwRCxHQUNwQixJQUFJUSxFQUFPaEMsU0FBU3dDLGNBQWMsVUFDbENSLEVBQUtWLE1BQVFFLEVBQ2JRLEVBQUtpQyxVQUFZekMsRUFDakJsQixFQUFjd0UsT0FBTzlDLE1BK0d6QnJCLEVBQVFvRSxpQkFBaUIsUUFBUzlELEdBQ2xDTCxFQUFRbUUsaUJBQWlCLFFBQVM1RCxHQUNsQ04sRUFBY2tFLGlCQUFpQixTQUFVM0QsR0FDekNOLEVBQWFpRSxpQkFBaUIsU0FBVTNELEdBN0xoRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhclxuICAgICAgICB0b2RheSA9IG5ldyBEYXRlKCksXG4gICAgICAgIGN1cnJlbnRNb250aCA9IHRvZGF5LmdldE1vbnRoKCksXG4gICAgICAgIGN1cnJlbnRZZWFyID0gdG9kYXkuZ2V0RnVsbFllYXIoKSxcbiAgICAgICAgc2VsZWN0WWVhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwieWVhclwiKSxcbiAgICAgICAgc2VsZWN0TW9udGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vbnRoXCIpLFxuICAgICAgICBjYWxlbmRhckRheXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbGVuZGFyID4gdGhlYWQgPiB0clwiKSxcbiAgICAgICAgY2FsZW5kYXJNb250aHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vbnRoXCIpLFxuICAgICAgICBjYWxlbmRhclllYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN5ZWFyXCIpLFxuICAgICAgICBtb250aHMgPSBbXCJKYW5cIiwgXCJGZWJcIiwgXCJNYXJcIiwgXCJBcHJcIiwgXCJNYXlcIiwgXCJKdW5cIiwgXCJKdWxcIiwgXCJBdWdcIiwgXCJTZXBcIiwgXCJPY3RcIiwgXCJOb3ZcIiwgXCJEZWNcIl0sXG4gICAgICAgIGRheXMgPSBbXCJTdW5cIiwgXCJNb25cIiwgXCJUdWVcIiwgXCJXZWRcIiwgXCJUaHVcIiwgXCJGcmlcIiwgXCJTYXRcIl0sXG4gICAgICAgIHllYXJzID0gW1wiMjAxMFwiLCBcIjIwMTFcIiwgXCIyMDEyXCIsIFwiMjAxM1wiLCBcIjIwMTRcIiwgXCIyMDE1XCIsIFwiMjAxNlwiLCBcIjIwMTdcIiwgXCIyMDE4XCIsIFwiMjAxOVwiLCBcIjIwMjBcIiwgXCIyMDIxXCJdLFxuICAgICAgICBtb250aEFuZFllYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1vbnRoQW5kWWVhclwiKSxcbiAgICAgICAgbmV4dEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXh0JyksXG4gICAgICAgIHByZXZCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlvdXMnKSxcbiAgICAgICAgbW9udGhEcm9wZG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb250aCcpLFxuICAgICAgICB5ZWFyRHJvcGRvd24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneWVhcicpLFxuICAgICAgICBGZXRjaFVybCA9IFwiaHR0cHM6Ly9hcGkuc3BhY2V4ZGF0YS5jb20vdjMvbGF1bmNoZXMvdXBjb21pbmc/bGF1bmNoX3llYXI9MjAyMCZmaWx0ZXI9bGF1bmNoX2RhdGVfbG9jYWwsbWlzc2lvbl9uYW1lXCIsXG4gICAgICAgIGZldGNoUmVzdWx0cyA9IFtdLFxuICAgICAgICBvYmogPSBbXTtcblxuXG4gICAgZnVuY3Rpb24gY2FsbEFqYXgodXJsLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgeG1saHR0cDtcbiAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIElFNyssIEZpcmVmb3gsIENocm9tZSwgT3BlcmEsIFNhZmFyaVxuICAgICAgICB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHhtbGh0dHAucmVhZHlTdGF0ZSA9PSA0ICYmIHhtbGh0dHAuc3RhdHVzID09IDIwMCkge1xuXG4gICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZSh4bWxodHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cob2JqLCAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICBmZXRjaFJlc3VsdHMuY29uY2F0KG9iaik7XG4gICAgICAgICAgICAgICAgc2hvd0NhbGVuZGFyKGN1cnJlbnRNb250aCwgY3VycmVudFllYXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgRmV0Y2hVcmwsIHRydWUpO1xuICAgICAgICB4bWxodHRwLnNlbmQoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9jZXNzUmVzdWx0cygpIHtcbiAgICAgICAgY29uc29sZS5sb2cob2JqLCBcImFycmF5XCIpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gb2JqLm1hcChpdGVtID0+ICh7XG4gICAgICAgICAgICAgICAgZGF0ZTogaXRlbS5sYXVuY2hfZGF0ZV9sb2NhbCwgdGV4dDogaXRlbS5taXNzaW9uX25hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuXG4gICAgZnVuY3Rpb24gcG9wdWxhdGVEYXlzKCkge1xuICAgICAgICBkYXlzLmZvckVhY2goZnVuY3Rpb24gKGRheSkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XG4gICAgICAgICAgICBpdGVtLmlubmVyVGV4dCA9IGRheTtcbiAgICAgICAgICAgIGNhbGVuZGFyRGF5cy5hcHBlbmQoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcG9wdWxhdGVNb250aHMoKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICAgIG1vbnRocy5mb3JFYWNoKGZ1bmN0aW9uIChtb250aCkge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuICAgICAgICAgICAgaXRlbS52YWx1ZSA9IGluZGV4Kys7XG4gICAgICAgICAgICBpdGVtLmlubmVyVGV4dCA9IG1vbnRoO1xuICAgICAgICAgICAgY2FsZW5kYXJNb250aHMuYXBwZW5kKGl0ZW0pO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBvcHVsYXRlWWVhcnMoKSB7XG4gICAgICAgIHllYXJzLmZvckVhY2goZnVuY3Rpb24gKHllYXIpIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICAgICAgICAgIGl0ZW0udmFsdWUgPSB5ZWFyO1xuICAgICAgICAgICAgaXRlbS5pbm5lclRleHQgPSB5ZWFyO1xuICAgICAgICAgICAgY2FsZW5kYXJZZWFycy5hcHBlbmQoaXRlbSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgY3VycmVudFllYXIgPSAoY3VycmVudE1vbnRoID09PSAxMSkgPyBjdXJyZW50WWVhciArIDEgOiBjdXJyZW50WWVhcjtcbiAgICAgICAgY3VycmVudE1vbnRoID0gKGN1cnJlbnRNb250aCArIDEpICUgMTI7XG4gICAgICAgIHNob3dDYWxlbmRhcihjdXJyZW50TW9udGgsIGN1cnJlbnRZZWFyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcmV2aW91cygpIHtcbiAgICAgICAgY3VycmVudFllYXIgPSAoY3VycmVudE1vbnRoID09PSAwKSA/IGN1cnJlbnRZZWFyIC0gMSA6IGN1cnJlbnRZZWFyO1xuICAgICAgICBjdXJyZW50TW9udGggPSAoY3VycmVudE1vbnRoID09PSAwKSA/IDExIDogY3VycmVudE1vbnRoIC0gMTtcbiAgICAgICAgc2hvd0NhbGVuZGFyKGN1cnJlbnRNb250aCwgY3VycmVudFllYXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGp1bXAoKSB7XG4gICAgICAgIGN1cnJlbnRZZWFyID0gcGFyc2VJbnQoc2VsZWN0WWVhci52YWx1ZSk7XG4gICAgICAgIGN1cnJlbnRNb250aCA9IHBhcnNlSW50KHNlbGVjdE1vbnRoLnZhbHVlKTtcbiAgICAgICAgc2hvd0NhbGVuZGFyKGN1cnJlbnRNb250aCwgY3VycmVudFllYXIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNob3dDYWxlbmRhcihtb250aCwgeWVhcikge1xuXG4gICAgICAgIGxldCBmaXJzdERheSA9IChuZXcgRGF0ZSh5ZWFyLCBtb250aCkpLmdldERheSgpO1xuICAgICAgICB2YXIgdGJsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYWxlbmRhci1ib2R5XCIpOyAvLyBib2R5IG9mIHRoZSBjYWxlbmRhclxuXG4gICAgICAgIHJlc3VsdHMgPSBwcm9jZXNzUmVzdWx0cygpO1xuXG4gICAgICAgIHRibC5pbm5lckhUTUwgPSBcIlwiO1xuXG4gICAgICAgIG1vbnRoQW5kWWVhci5pbm5lckhUTUwgPSBtb250aHNbbW9udGhdICsgXCIgXCIgKyB5ZWFyO1xuICAgICAgICBzZWxlY3RZZWFyLnZhbHVlID0geWVhcjtcbiAgICAgICAgc2VsZWN0TW9udGgudmFsdWUgPSBtb250aDtcblxuICAgICAgICAvLyBjcmVhdGluZyBhbGwgY2VsbHNcbiAgICAgICAgbGV0IGRhdGUgPSAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgLy8gY3JlYXRlcyBhIHRhYmxlIHJvd1xuICAgICAgICAgICAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcblxuICAgICAgICAgICAgLy9jcmVhdGluZyBpbmRpdmlkdWFsIGNlbGxzLCBmaWxpbmcgdGhlbSB1cCB3aXRoIGRhdGEuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDc7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAwICYmIGogPCBmaXJzdERheSkge1xuICAgICAgICAgICAgICAgICAgICBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKGNlbGxUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0ZSA+IGRheXNJbk1vbnRoKG1vbnRoLCB5ZWFyKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xuICAgICAgICAgICAgICAgICAgICBjZWxsVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0ZSA9PT0gdG9kYXkuZ2V0RGF0ZSgpICYmIHllYXIgPT09IHRvZGF5LmdldEZ1bGxZZWFyKCkgJiYgbW9udGggPT09IHRvZGF5LmdldE1vbnRoKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImJnLWluZm9cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHRzKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhQYXJ0ID0gbW9udGggKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb250aE1hdGNoID0gbW9udGhQYXJ0LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobW9udGhNYXRjaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0cy5maWx0ZXIoaCA9PiBoLmRhdGUuaW5jbHVkZXMoXCIwXCIgKyBtb250aE1hdGNoKSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCByZXN1bHQubGVuZ3RoOyBrKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnQgPSByZXN1bHRba10uZGF0ZS5zcGxpdCgvLXxUL2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pc3Npb25OYW1lID0gcmVzdWx0W2tdLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXJ0WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1pc3Npb25OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBhcnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGVJbnQgPSBwYXJzZUludChwYXJ0WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb250aEludCA9IHBhcnNlSW50KHBhcnRbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHllYXJJbnQgPSBwYXJzZUludChwYXJ0WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aW1lSW50ID0gcGFydFszXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtaXNzaW9uRGV0YWlscyA9IChtaXNzaW9uTmFtZSArJyAoJysgdGltZUludCArJyknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGVJbnQgPT09IGRhdGUgJiYgeWVhckludCA9PT0geWVhciAmJiBtb250aEludCA9PT0gbW9udGggKyAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwiYmctc3BhY2VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWxsLmFwcGVuZENoaWxkKHNwYW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwYW4uaW5uZXJUZXh0ID0gbWlzc2lvbkRldGFpbHNcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoY2VsbFRleHQpO1xuICAgICAgICAgICAgICAgICAgICByb3cuYXBwZW5kQ2hpbGQoY2VsbCk7XG4gICAgICAgICAgICAgICAgICAgIGRhdGUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRibC5hcHBlbmRDaGlsZChyb3cpOyAvLyBhcHBlbmRpbmcgZWFjaCByb3cgaW50byBjYWxlbmRhciBib2R5LlxuICAgICAgICB9XG4gICAgfVxuXG4vLyBjaGVjayBob3cgbWFueSBkYXlzIGluIGEgbW9udGggY29kZSBmcm9tIGh0dHBzOi8vZHpvbmUuY29tL2FydGljbGVzL2RldGVybWluaW5nLW51bWJlci1kYXlzLW1vbnRoXG4gICAgZnVuY3Rpb24gZGF5c0luTW9udGgoaU1vbnRoLCBpWWVhcikge1xuICAgICAgICByZXR1cm4gMzIgLSBuZXcgRGF0ZShpWWVhciwgaU1vbnRoLCAzMikuZ2V0RGF0ZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgICAgICAgY2FsbEFqYXgoKTtcbiAgICAgICAgcG9wdWxhdGVEYXlzKCk7XG4gICAgICAgIHBvcHVsYXRlTW9udGhzKCk7XG4gICAgICAgIHBvcHVsYXRlWWVhcnMoKTtcblxuICAgICAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmV4dCk7XG4gICAgICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwcmV2aW91cyk7XG4gICAgICAgIG1vbnRoRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywganVtcCk7XG4gICAgICAgIHllYXJEcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBqdW1wKTtcbiAgICB9XG5cbiAgICBpbml0KCk7XG59KSgpOyJdfQ==
